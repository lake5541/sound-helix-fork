<SoundHelix version="0.5+" xmlns:xi="http://www.w3.org/2001/XInclude">
  <xi:include href="../includes/Standard-SongNameEngine.xml" />
  <structure>
    <bars>
      <random min="166" max="223" step="15" />
    </bars>
    <beatsPerBar>7</beatsPerBar>
    <ticksPerBeat>12</ticksPerBeat>

  </structure>
  <xi:include href="../includes/Standard-HarmonyEngine.xml" />
  <arrangementEngine class="SimpleArrangementEngine">
	   	<patternEngine class="RandomFragmentPatternEngine">
					<patternTicks>58</patternTicks>
					<ticksPerBeat>42</ticksPerBeat>
					<uniquePatternParts>true</uniquePatternParts>
		<chordPattern>G/5,F/2,C/2,B/12,A/2,B/2,Am/2,+C/8,E6/2,B/2,C/12,G/2,A/2,C/4</chordPattern>
  		<chordPattern>B/5,A/2,G/2,F/12,A/2,C/2,Am/2,+C/8,E6/2,A/2,C/12,F/2,A/2,C/4</chordPattern>
	  	<chordPattern>C/5,E/2,F/2,B/12,A/2,D/2,Am/2,+C/8,E6/2,G/2,C/12,E/2,A/2,C/4</chordPattern>	
  		<chordPattern>D/5,A/2,A/2,F/12,A/2,E/2,Am/2,+C/8,E6/2,F/2,C/12,A/2,A/2,C/4</chordPattern>
</patternEngine>
    <maxIterations>6000000</maxIterations>
    <minActivityCount>3</minActivityCount>
    <maxActivityCount>28</maxActivityCount>
    <maxActivityChangeCount>2011</maxActivityChangeCount>
    <startActivityCounts>
      <random list="1,2,3,4|1,3,4,2,5|4,1,2,3,4|5,5,1,3|,1,1,5,3" />
    </startActivityCounts>
    <stopActivityCounts>
      <random list="2,1|3,2|4,3,2|5,4,2,1,3|4,4,1,2,1|3,1,3,1|2,4,5|4,4,3|1,5,5,1" />
    </stopActivityCounts>
    		<activityVector name="string">
			<startAfterSection>3</startAfterSection>
			<minActive>20</minActive>
			<minSegmentLength>2</minSegmentLength>
		</activityVector>
    <activityVector name="accomp">
      <stopShift>1</stopShift>
      <minActive>10</minActive>
      <maxActive>80</maxActive>
      <minSegmentLength>3</minSegmentLength>
    </activityVector>
    <activityVector name="arpeggio">
      <minActive>15</minActive>
      <maxActive>145</maxActive>
      <minSegmentLength>2</minSegmentLength>
    </activityVector>
    <activityVector name="melody">
      <startAfterSection>3</startAfterSection>
      <stopBeforeSection>1</stopBeforeSection>
      <stopShift>2</stopShift>
      <minActive>7</minActive>
      <maxActive>144</maxActive>
      <maxSegmentCount>3</maxSegmentCount>
      <minSegmentLength>2</minSegmentLength>
      <maxSegmentLength>240</maxSegmentLength>
    </activityVector>
    <activityVector name="base_and_snare">
      <startAfterSection>3</startAfterSection>
      <startBeforeSection>5</startBeforeSection>
      <stopBeforeSection>1</stopBeforeSection>
      <stopAfterSection>13</stopAfterSection>
      <minActive>15</minActive>
      <maxActive>135</maxActive>
      <minSegmentLength>2</minSegmentLength>
      <maxSegmentLength>190</maxSegmentLength>
      <maxPauseLength>50</maxPauseLength>
      <minSegmentCount>2</minSegmentCount>
      <maxSegmentCount>19</maxSegmentCount>
    </activityVector>
    <activityVector name="pad">
      <minActive>5</minActive>
      <maxActive>115</maxActive>
      <minSegmentLength>2</minSegmentLength>
    </activityVector>
    <activityVector name="bass">
      <startAfterSection>0</startAfterSection>
      <minActive>5</minActive>
      <maxActive>115</maxActive>
      <minSegmentLength>2</minSegmentLength>
    </activityVector>
    <activityVector name="randombass">
      <startAfterSection>1</startAfterSection>
      <stopBeforeSection>0</stopBeforeSection>
      <minActive>5</minActive>
      <maxActive>115</maxActive>
      <minSegmentLength>2</minSegmentLength>
    </activityVector>

    <track>
      <instrument>arpeggio</instrument>
      <transposition>0</transposition>
      <sequenceEngine class="ArpeggioSequenceEngine">
      	<patternEngine class="RandomFragmentPatternEngine">
					<patternTicks>19</patternTicks>
					<ticksPerBeat>10</ticksPerBeat>
					<uniquePatternParts>true</uniquePatternParts>
					<patternString>
						<randomlist>"A1,B1,A2,B2,A1,B1,A2,B3|A1,A1,A1,B1,A1,A1,A1,B2|A1,A1,A1,B1,A1,A1,A1,B2,A1,A1,A1,B1,A1,A1,A1,B3|A1,A1,A1,A2,A2,C3,A1,B2|C3,C2,C1,B3,B2,B1,B1,B2,A1,A1</randomlist>
				
					<pattern group="A">0/3,1/3,2/3,3/3,4/3,1/3,4/3,3/3|0/3,1/3,2/3,3/3,4/3,5/3,4/3,2/3|0/3,1/3,3/3,5/3,4/3,2/3,3/3,1/3</pattern>
					<pattern group="B">0/3,1/3,2/3,3/3,-/3,5/3,4/3,-/3|0/3,1/3,-/3,3/3,6/3,-/3,4/3,2/3|0/3,1/3,4/3,-/3,3/2,5/2,4/2,1/2,4/2,3/2|0/3,4/3,-/3,2/3,5/2,3/2,6/2,2/2,4/2,1/2</pattern>
					<pattern group="C">0/0,0/1,2/3,1/3,4/4,4/4,1/1,2/3|0/3,1/2,2/0,3/0,4/0,5/3,0/3,2/1|0/1,1/1,3/0,5/6,4/0,2/2,3/2,2/6</pattern>
					<pattern group="D">1/1,2/0,0/4,1/5,-/5,2/0,4/3,-/4|5/4,2/1,-/5,3/1,1/3,-/1,4/5,2/4|2/6,2/1,2/4,-/6,0/2,0/2,0/2,6/1,6/4,3/4|4/1,4/1,-/4,2/5,2/5,0/2,1/2,1/1,/2,1/2</pattern>
							</patternString>	
							</patternEngine>
        <normalizeChords>true</normalizeChords>
        <obeyChordSections>true</obeyChordSections>
        <patternEngines>
          <patternEngine class="StringPatternEngine">
            <string>0:26000,1:26000,2:26000,1:22000</string>
          </patternEngine>
          <patternEngine class="StringPatternEngine">
            <string>0:26000,1:26000,2:26000,3:26000,4:22000,3:24000,2:26000,1:20000</string>
          </patternEngine>
          <patternEngine class="StringPatternEngine">
            <string>0:26000,1:26000,2:26000,3:26000,4:22040,5:22000,6:22040,7:26000,8:24000,7:22000,6:26000,5:22000,4:24040,3:26000,2:24000,1:24000</string>
          </patternEngine>
          <patternEngine class="StringPatternEngine">
            <string>0:21080,1:22000,2:21000,3:22000,4:24000,5:22200,6:21080,7:26000,8:21000,7:26000,6:21000,5:26000,4:23000,3:26000,2:23000,1:26000,0:24800,1:26800,2:22800,3:26000,4:26000,3:26000,2:26000,1:26000</string>
          </patternEngine>
          <patternEngine class="StringPatternEngine">
            <string>0:26000,1:26000,2:26000,3:26000,4:26000,5:26080,6:26000,7:26000,8:26000,7:26000,6:26000,5:26000,4:26000,3:26000,2:26000,1:26000,0:26000,1:26000,2:26000,3:26800,4:24800,5:26000,6:24400,5:26000,4:26000,3:26000,2:26000,1:26040</string>
          </patternEngine>
          <patternEngine class="StringPatternEngine">
            <string>0:2680,1:26080,2:26000,3:26000,4:26000,5:26080,6:26000,7:26000,8:24000,7:26000,6:26000,5:24000,4:26000,3:26000,2:26000,1:24000,0:26000,1:26000,2:26000,3:22000,4:26000,5:26000,6:20000,7:26000,8:26000,7:26000,6:26000,5:26000,4:26000,3:26000,2:26000,1:26000</string>
          </patternEngine>
        </patternEngines>
        <patternEngines>
          <patternEngine class="StringPatternEngine">
            <string>0:26000,1:22200,2:26000,1:26000</string>
          </patternEngine>
          <patternEngine class="StringPatternEngine">
            <string>0:21000,1:21000,2:21000,1:36000,2:22000,3:26000,2:24000,1:26000</string>
          </patternEngine>
          <patternEngine class="StringPatternEngine">
            <string>0:26000,1:26000,2:26000,1:26000,2:26000,3:26000,2:23000,3:26000,4:22000,3:26800,4:26000,5:24080,4:26000,3:24400,2:24000,1:26400</string>
          </patternEngine>
          <patternEngine class="StringPatternEngine">
            <string>0:26000,1:22200,2:26000,1:26000,2:26000,3:22200,2:26000,3:26000,4:22200,3:26000,4:26000,5:22200,4:26040,5:22000,6:26000,5:22200,6:26000,7:26020,6:26020,5:26000,4:26000,3:26000,2:26000,1:26000</string>
          </patternEngine>
          <patternEngine class="StringPatternEngine">
            <string>0:26000,1:26000,2:26000,1:26000,2:26040,3:26400,2:26040,3:26000,4:26000,3:26000,4:26400,5:26000,4:24400,5:26000,6:26200,5:24400,6:26000,7:24400,6:26000,7:28000,8:26000,7:26000,6:26000,5:26000,4:26000,3:26000,2:26000,1:26000</string>
          </patternEngine>
          <patternEngine class="StringPatternEngine">
            <string>0:21000,1:26000,2:21000,1:26000,2:26000,3:22200,2:26000,3:26000,4:26000,3:16000,4:26200,5:26100,4:26100,5:26100,6:26100,5:22200,6:26200,7:26000,6:26020,7:26000,8:26000,7:26000,8:26000,9:26020,8:26000,7:26000,6:26000,5:26000,4:26000,3:26000,2:26000,1:26000</string>
          </patternEngine>
          <patternEngine class="StringPatternEngine">
            <string>0:22200,1:22200,2:22200,1:22200,2:21000,3:22200,2:26000,3:26000,4:26000,3:26000,4:26000,5:26000,4:26000,5:26000,6:26000,5:26000,6:26000,7:26000,6:26000,7:26000,8:26000,7:26000,8:26000,9:26000,8:26000,7:26000,6:26000,5:26000,4:26000,3:26000,2:26000,1:26000,0:26000,1:26000,2:26000,1:26000,2:26000,3:26000,2:26000,3:26000,4:26000,3:26000,4:26000,5:26000,4:26000,3:26000,2:26000,1:26000</string>
          </patternEngine>
          <patternEngine class="StringPatternEngine">
            <string>0:26000,1:23000,2:26000,1:26000,2:26000,3:26000,2:26000,3:26000,4:26000,3:26000,4:26000,5:26000,4:26000,5:26000,6:26000,5:26000,6:26000,7:26000,6:26000,7:26000,8:26000,7:26000,8:26000,9:26000,8:26000,7:26000,6:26000,5:26000,4:26000,3:26000,2:26000,1:26000,0:26000,1:26000,2:26000,1:26000,2:26000,3:26000,2:26000,3:26000,4:26000,3:26000,4:26020,5:26000,4:26020,5:22000,6:26000,5:24000,6:26000,7:24000,6:26000,7:26000,8:26000,7:26000,8:24000,9:24000,8:26000,7:26000,6:26000,5:26000,4:26000,3:26000,2:26000,1:26000</string>
          </patternEngine>
        </patternEngines>
      </sequenceEngine>
      <activityVector>arpeggio</activityVector>
    </track> 
    <track>
      <instrument>accomp</instrument>
      <transposition>-24</transposition>
      <sequenceEngine class="MultiPatternSequenceEngine">
        <patternEngines>
          <patternEngine class="StringPatternEngine">
            <string>-,-,-,-,5,-,-,-</string>
          </patternEngine>
          <patternEngine class="StringPatternEngine">
            <string>-,-,-,-,4,-,-,-</string>
          </patternEngine>
          <patternEngine class="StringPatternEngine">
            <string>-,-,-,-,3,-,-,-</string>
          </patternEngine>
          <patternEngine class="StringPatternEngine">
            <string>0,-,-,-,-,-,2,-,-,-,4,-,-,-,-,-,2,-,-,-,-,-,0,-,-,-,0,-,-,-,-,-,3,-,-,-,-,-,1,-,-,-,0,-,-,-,-,-,-,-,-,1,-,-,0,-,-,-,0,-,-,-,+,-,-,-,4,-,-,-,-,-,-,-,3,-,-,-,-,-,-,3,-,-,-,-,-,-,3,+,0,-,-,-,-,-,-,1,-,-,-,-,-,1,-,-,-,-,-,-,2,-,-,-,2,-,-,-,-,0,-,-,-,-,-,-,-,-0</string>
          </patternEngine>
        </patternEngines>
      </sequenceEngine>
      <activityVector>accomp</activityVector>
    </track>
    <track>
      <instrument>melody</instrument>
      <transposition>0</transposition>
      <sequenceEngine class="MelodySequenceEngine">
        <melodies>1,2,2,3|2,0,1,1|1,0,2,1|3,2,1,2|2,1,1,2|1,2,3,0|3,2,0,1|0,0,1,1,1,3|3,3,2,1,1|0,0,0,1,3,1</melodies>
        <minPitch>3</minPitch>
        <maxPitch>15</maxPitch>
        <pitchDistances>-2,-2,-1,-1,-1,-1,0,0,1,1,1,1,2,2</pitchDistances>
        <patternEngine class="RandomPatternEngine">
          <patternTicks>16</patternTicks>
          <patternString>
            <random list="A1,A2,A1,A3,A1,A2,A1,B1|C1,C2,C3,A2,A1,B1,B1,A3|A2,A1,C3,C3,C2,C1,B3,B1|C3,C2,C3,C1,A2,B3,B2,B1|A1,A1,A1,A3,B2,B2,B3,B1|C2,C2|A3,A3,C2,C2" />
            <random list="B2,C1,B3,B1,B2,B1,C1|A1,B2,D3,A2,B1,C1,D1,C3|B2,B1,B3,C3,B2,D1,D3,B1|B3,D2,B3,D1,A2,C3,D2,B1|D1,C1,C1,C3,D2,D2,D3,C1|D2,D2|D3,D3,D2,D2" />
            <random list="B1,B2,B1,B3,B1,B2,B1,B1|B1,C2,C3,B2,B1,B1,D1,A3|D2,C1,D3,D3,B2,B1,A3,A1|A3,A2,A3,B1|D2,D3,D2,C1" />
            <random list="D1,C2,C1,D3,D2,D2,D1,C1|D1,D2,D3,C2,C1,C1,C1,C3|A2,D1,D3,D3,D2,D1,D3,D1|D3,D2,C3,D1|D2,D3,D2,D1" />
                       <pattern group="A">0,-,-,-,-,-,-,-,0,-,-,-,-,-,-,-</pattern>
            <pattern group="B">0,-,3,-,1,-,-,-,0,-,1,-,-,1,-,-|1,-,-,0,-,-,-,-,3,-,-,-,1,-,-,-|1,-,-,-,2,-,-,-,3,-,-,-,-,-,0,-|2,-,-,-,2,-,-,-,0,-,-,-,-,-,-,1|1,1,2,-,-,-,-,-,0,-,-,-,-,-,1,1</pattern>
            <pattern group="C">1,0,2,-,-,-,-,1,1,1,0,0,-,-,-,-|1,1,1,-,-,-,-,-2,0,0,2-,-.-.-.-|-.-.-.-,1,-,-,-,0,-,-,1,-,1,1,1</pattern>
            <pattern group="D">-,-,-,-,1,-,-,2|-,-,-,1,3,-,2,-|-,-,-,2,1,2,-,1|-,-,-,1,2,2,2,-</pattern>
            
          </patternString>
          <noteProbability>65</noteProbability>
          <legatoProbability>45</legatoProbability>
          <minVelocity>127</minVelocity>
          <maxVelocity>327</maxVelocity>
          <minActiveTicks>7</minActiveTicks>
          <maxActiveTicks>130</maxActiveTicks>
          <offsets>0,0,0,0,0,0,+,+,+,+,+,*,*</offsets>
          <noteLengths>2,2,2,3,2,2,2,1,2</noteLengths>
          <pauseLengths>2,2,2,2,1,2</pauseLengths>
          <pitchVelocityCorrelation>100</pitchVelocityCorrelation>
          <velocityExponent>3</velocityExponent>
        </patternEngine>
      </sequenceEngine>
      <activityVector>melody</activityVector>

    </track>

		<track>
			<instrument>string</instrument>
			<velocity>600</velocity>
			<transposition>4</transposition>
			<sequenceEngine class="FreePatternSequenceEngine">
				<patternEngine class="StringPatternEngine">
					<string ticksPerBeat="4">(0/14,-1/2,0/4,-3/8,0/2,2/2,4/6,0/2,2/6,-1/2,0/8,-3/8)*2,4/14,2/2,4/4,0/8,4/2,6/2,7/6,4/2,6/6,2/2,4/8,0/8,4/14,2/2,4/4,0/8,4/2,6/2,7/6,4/2,6/6,2/2,4/16</string>
				    <patternString>
            <random list="A1,A2,A1,A3,A1,A2,A1,B1|C1,C2,C3,A2,A1,B1,B1,A3|A2,A1,C3,C3,C2,C1,B3,B1|C3,C2,C3,C1,A2,B3,B2,B1|A1,A1,A1,A3,B2,B2,B3,B1|C2,C2|A3,A3,C2,C2" />
            <random list="B2,C1,B3,B1,B2,B1,C1|A1,B2,D3,A2,B1,C1,D1,C3|B2,B1,B3,C3,B2,D1,D3,B1|B3,D2,B3,D1,A2,C3,D2,B1|D1,C1,C1,C3,D2,D2,D3,C1|D2,D2|D3,D3,D2,D2" />
            <random list="B1,B2,B1,B3,B1,B2,B1,B1|B1,C2,C3,B2,B1,B1,D1,A3|D2,C1,D3,D3,B2,B1,A3,A1|A3,A2,A3,B1|D2,D3,D2,C1" />
            <random list="D1,C2,C1,D3,D2,D2,D1,C1|D1,D2,D3,C2,C1,C1,C1,C3|A2,D1,D3,D3,D2,D1,D3,D1|D3,D2,C3,D1|D2,D3,D2,D1" />
                       <pattern group="A">0,-,-,-,-,-,-,-,0,-,-,-,-,-,-,-</pattern>
            <pattern group="B">0,-,3,-,1,-,-,-,0,-,1,-,-,1,-,-|1,-,-,0,-,-,-,-,3,-,-,-,1,-,-,-|1,-,-,-,2,-,-,-,3,-,-,-,-,-,0,-|2,-,-,-,2,-,-,-,0,-,-,-,-,-,-,1|1,1,2,-,-,-,-,-,0,-,-,-,-,-,1,1</pattern>
            <pattern group="C">1,0,2,-,-,-,-,1,1,1,0,0,-,-,-,-|1,1,1,-,-,-,-,-2,0,0,2-,-.-.-.-|-.-.-.-,1,-,-,-,0,-,-,1,-,1,1,1</pattern>
            <pattern group="D">-,-,-,-,1,-,-,2|-,-,-,1,3,-,2,-|-,-,-,2,1,2,-,1|-,-,-,1,2,2,2,-</pattern>
            
          </patternString>
				
				</patternEngine>
			</sequenceEngine>
			<activityVector>string</activityVector>
		</track>
    <track>
      <instrument>pad</instrument>
      <sequenceEngine class="PadSequenceEngine">
        <offsets>0,1,2,3</offsets>

        <velocity>15000</velocity>
 <transposition>0</transposition>
      </sequenceEngine>
      <activityVector>pad</activityVector>
    </track>

    <track>
      <transposition>0</transposition>
      <instrument>bass</instrument>
   
   
			<sequenceEngine class="PatternSequenceEngine">
				<patternEngine class="RandomPatternEngine">
					<patternTicks>16</patternTicks>
					<patternString>
						<random list="B1,A2,B2,A3,B2|C1,D1,A1,A2,A2|C1,C2,C3,A2|B2,B1|A1,B1,C1|D1,D2,D3,A1"/>
					</patternString>
					<noteProbability>50</noteProbability>
					<legatoProbability>25</legatoProbability>
					<minVelocity>100</minVelocity>
					<maxVelocity>200</maxVelocity>
					<minActiveTicks>10</minActiveTicks>
					<maxActiveTicks>14</maxActiveTicks>
					<offsets>0,0,0,3</offsets>
					<noteLengths>1,1,1,1,1,2,1</noteLengths>
					<pauseLengths>1</pauseLengths>
					<pitchVelocityCorrelation>100</pitchVelocityCorrelation>
					<velocityExponent>1</velocityExponent>
					<ticksPerBeat>4</ticksPerBeat>
				</patternEngine>
			</sequenceEngine>
   
   
   
      <activityVector>bass</activityVector>
    </track>

    <track>
      <transposition>0</transposition>
      <instrument>randombass</instrument>
      <sequenceEngine class="PatternSequenceEngine">
        <patternEngine class="RandomPatternEngine">
          <patternTicks>16</patternTicks>
          <patternString>
            <random list="A1,B2,D1,D3|C1,A2,D1,B3,B1,A2,A1,A4" />
          </patternString>
          <noteProbability>45</noteProbability>
          <legatoProbability>25</legatoProbability>
          <minVelocity>12</minVelocity>
          <maxVelocity>127</maxVelocity>
          <minActiveTicks>8</minActiveTicks>
          <maxActiveTicks>15</maxActiveTicks>
          <offsets>0,0,0,2,3,0,0,0</offsets>
          <noteLengths>1,2,3,2</noteLengths>
          <pauseLengths>1,2</pauseLengths>
          <pitchVelocityCorrelation>100</pitchVelocityCorrelation>
          <velocityExponent>3</velocityExponent>
        </patternEngine>
      </sequenceEngine>
      <activityVector>randombass</activityVector>
    </track>
  </arrangementEngine>

  <player class="MidiPlayer">
    <bpm>
      <random min="32" max="128" type="normal" variance="223" />
    </bpm>
    <transposition>
      <random min="65" max="125" />
    </transposition>
    <beforePlayWaitTicks>4</beforePlayWaitTicks>
    <afterPlayWaitTicks>16</afterPlayWaitTicks>
    <groove>
      <random list="13,2|16,8,52|32,10,3|65,72,3|122,8,7|50,85,7|111,90,8|115,85,8|125,75,115,85|2,10,62,7|100,11|14,8|7,14,32,72" />
    </groove>


    <!-- uncomment the following line if you want to write all generated songs as MIDI files -->
    <!-- <midiFilename>midifiles/${safeSongName}-${safeDeviceName}.mid</midiFilename> -->
    <device name="device1" clockSynchronization="false">Gervill,Microsoft GS Wavetable Synth,Microsoft GS Wavetable SW Synth,Java Sound Synthesizer</device>
    <map instrument="arpeggio" device="device1" channel="1" program="1" />

    <map instrument="accomp" device="device1" channel="2" program="1" />
    <map instrument="pad" device="device1" channel="4" program="92" />
    <map instrument="randombass" device="device1" channel="6" program="33" />
	<map instrument="string" device="device1" channel="5" program="41"/>
    <map instrument="melody" device="device1" channel="3" program="25" />
    <map instrument="bass" device="device1" channel="4" program="33" />
  	<controllerValue device="device1" channel="2" controller="72">80</controllerValue>
  	<controllerValue device="device1" channel="3" controller="72">80</controllerValue>
  	<controllerValue device="device1" channel="4" controller="72">80</controllerValue>
  	<controllerValue device="device1" channel="3" controller="76">50</controllerValue>
  	<controllerValue device="device1" channel="3" controller="77">66</controllerValue>
  	<controllerValue device="device1" channel="3" controller="78">0</controllerValue>
	   
  </player>
</SoundHelix>
